default_version: 'TOSCA'
default_settings: ["Backward"]
default_model: 'AbINS'

version:
    TFXA:
        constants: &tfxa_constants
            final_neutron_energy: 32.0  # Final energy on the crystal analyser in cm-1
            scattering_angle: 2.356  # Angle of the crystal analyser radians (NO LONGER USED)
            energy_bin_width: 1.0  # Default bin width in wavenumber
            primary_flight_path: 12.13  # m
            primary_flight_path_uncertainty: 0.0021  # m
            water_moderator_constant: 44  # us
            time_channel_uncertainty: 2  # us
            sample_thickness: 0.002  # m
            graphite_thickness: 0.002  # m
            detector_thickness: 0.006  # m
            sample_width: 0.02  # m
            detector_width: 0.012  # m
            graphite_analyser_mosaic: 2.5  # deg
            crystal_plane_spacing: 3.348e-10  # m
        settings: &tfxa_settings
            Backward:
                angles: [ 134.98885653282196 ]
                average_secondary_flight_path: 0.671  # m
                average_final_energy: 3.909  # meV
                average_bragg_angle_graphite: 43.  # deg
        models:
            book:
                function: "tosca_book"
                citation: ""
                parameters: *tfxa_constants
                settings: *tfxa_settings
    TOSCA1:
        constants: &tosca1_constants
            final_neutron_energy: 32.0  # Final energy on the crystal analyser in cm-1
            scattering_angle: 2.356  # Angle of the crystal analyser radians (NO LONGER USED)
            energy_bin_width: 1.0  # Default bin width in wavenumber
            primary_flight_path: 12.264  # m
            primary_flight_path_uncertainty: 0.0021  # m
            water_moderator_constant: 44  # us
            time_channel_uncertainty: 2  # us
            sample_thickness: 0.002  # m
            graphite_thickness: 0.002  # m
            detector_thickness: 0.0025  # m
            sample_width: 0.02  # m
            detector_width: 0.012  # m
            graphite_analyser_mosaic: 2.5  # deg
            crystal_plane_spacing: 3.348e-10  # m
        settings: &tosca1_setttings
            Backward:
                angles: [ 134.98885653282196 ]
                average_secondary_flight_path: 0.7456  # m
                average_final_energy: 3.51  # meV
                average_bragg_angle_graphite: 46.03  # deg
                change_average_bragg_angle_graphite: 5.0814852427945665
        models:
            book:
                function: "tosca_book"
                citation: ""
                parameters: *tosca1_constants
                settings: *tosca1_setttings
    TOSCA:
        constants: &tosca_constants
            primary_flight_path: 17.  # m
            primary_flight_path_uncertainty: 0.0021  # m
            sample_thickness: 0.002  # m
            detector_thickness: 0.0025  # m
            crystal_plane_spacing: 3.348e-10  # m
        settings: &tosca_settings
            Backward: &tosca_settings_backward
                angles: [ 134.98885653282196 ]
                average_secondary_flight_path: 0.6279  # m
                average_bragg_angle_graphite: 47.73  # deg
            Forward: &tosca_settings_forward
                angles: [ 45.0 ]
                average_secondary_flight_path: 0.6279  # m
                average_bragg_angle_graphite: 47.45  # deg
#            All detectors:
#                angles: [ 45.0, 134.98885653282196 ]
        models:
            AbINS:
                # TOSCA parameters for resolution function
                # sigma = tosca_a * omega * omega + tosca_b * omega + tosca_c
                # where sigma is width of Gaussian function
                function: "polynomial"
                citation: ""
                #original_parameters: [2.5, 0.005, 0.0000001] wavenumber
                parameters:
                    fit: [ 0.3099604960830007, 0.005, 8.065543937349209e-07 ]  # meV
                settings: {}
            book:
                function: "tosca_book"
                citation: ""
                parameters:
                    <<: *tosca_constants
                    water_moderator_constant: 44  # us
                    time_channel_uncertainty: 2  # us
                    graphite_thickness: 0.002  # m
                    sample_width: 0.04  # m ???????????? where is it used?
                    detector_width: 0.12  # m
                    graphite_analyser_mosaic: 2.5  # deg
                settings:
                    <<: *tosca_settings
                    Backward:
                        <<: *tosca_settings_backward
                        average_final_energy: 3.32  # meV
                        change_average_bragg_angle_graphite: 17.439366410966983
                    Forward:
                        <<: *tosca_settings_forward
                        average_final_energy: 3.35  # meV
                        change_average_bragg_angle_graphite: 17.59374274222979
            vision:
                function: "vision_paper"
                citation: "https://doi.org/10.1016/j.nima.2009.03.204"
                parameters:
                    <<: *tosca_constants
                    d_r: 12.9e-6
                    d_t: null
                settings: *tosca_settings
